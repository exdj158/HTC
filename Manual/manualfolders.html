<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Manual folders setup (Windows version)</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <script type="text/javascript" language="javascript">
        function toggleBlock(id) {
            if (document.getElementById(id).style.display == 'none') {
                document.getElementById(id).style.display = 'block';
            }
            else {
                document.getElementById(id).style.display = 'none';
            }
        }
    </script>
    
    <table width="100%" cellpadding="0" cellspacing="0">
        <tr>
            <td width="320">
                <table>
                    <tr>
                        <td style="vertical-align:top;text-align:left;">
                            <a target='_blank' href='http://www.element-it.com/asp-net-explorer-browser/online-share/web-file-manager.aspx'><img style='cursor:pointer;' alt="HTTP Commander" src="Images/HCLogo.png" border="0" /></a>
                        </td>
                        <td class="green" style="vertical-align:top;text-align:left;padding-top:21px;">
                            &nbsp;AJS 4.x
                        </td>
                    </tr>
                </table>
                <span class="gray">Manual</span>
            </td>
             <td>
  <!-- For windows version only. Start --> 
	<p>
	<strong>Note!</strong> This Manual is for the <strong>"Windows authentication"</strong> version, 
	which is designed to work with existing Windows server or Active Directory accounts and Windows authentication. 
	If you want to create accounts by yourself and store their credentials in your own HTTP Commander XML database, 
	you need to download the <a target="_blank" href="http://www.element-it.com/downloadfile.aspx?type=st">"Forms authentication" version</a>!
	This Manual is for the Windows authentication version only!
	</p>
	<!-- For windows version only. End --> 
	
 
	
                
            </td>
            <td align="char" width="230">
                <img alt="" src="Images/world.jpg" align="middle" hspace="5" style="vertical-align:top;padding-top:1px;" /><b><a target="_blank" title="web file manager" href="http://www.element-it.com/asp-net-explorer-browser/online-share/web-file-manager.aspx">Web file manager</a></b><br />
                <img alt="" src="Images/support.png" width="16" height="16" align="middle" hspace="5" style="vertical-align:top;padding-top:1px;" /><b><a
                    href="onlinesupport.html" target="main">Free Installation assistance</a></b><br />
                <img alt="" src="Images/help.png" align="middle" width="16" height="16" hspace="5" style="vertical-align:top;padding-top:1px;" /><b><a
                    href="index.html" title="Manual Home page" target="_blank">Manual Home page</a></b><br />
            </td>
        </tr>
    </table>
    
	<p class="topic">
        <a id="hcadsicomtopic">Manual and programmatic configuration of Folders and Users</a>
    </p>
	<ol>
		<li>
			<a href="#manualsetup">Manual folders and users setup at Notepad</a>
		</li>
		<li>
			<a href="#programmatic">Setup users and folders programmatically</a>
		</li>
	</ol>
    <p class="topic">
        <a id="manualsetup">Manual folders and users setup at Notepad</a>
    </p>
 
<strong>Manual folders setup (without Admin panel)</strong><br/><br/>
You can setup folders for users in the  <b>Data\Folders.xml</b> file. It has XML format and you can use any text editor to edit it (e.g. Notepad).<br/>
If you don't know XML or have other problems with manual folders setup, use the <a href="adminpanel.html">Admin panel online tool</a>. See available values of folders' paths, user names in the <a href="adminpanel.html">Admin panel online tool</a> description as well.
<br/><br/>
Below is the example of Folders.xml default content. It provides access to "%APPROOT%\DemoFolder\Folder1" for demo user and
 %APPROOT%\DemoFolder\Folder2 for admin group.<br/><br/>
 
 
<textarea cols="60" rows="10">
<?xml version="1.0" encoding="utf-8"?>
<Folders>
  <Folder>
    <Name>Demo folder 1</Name>
    <Location>%APPROOT%\DemoFolder\Folder1</Location>
    <UserPermissions>
      <Permission>
        <IdentityName>demo</IdentityName>
        <Create>true</Create>
        <Delete>true</Delete>
        <Rename>true</Rename>
        <Upload>true</Upload>
        <Download>true</Download>
        <ZipDownload>true</ZipDownload>
        <Zip>true</Zip>
        <Unzip>true</Unzip>
        <Cut>true</Cut>
        <Copy>true</Copy>
        <ListFiles>true</ListFiles>
        <ListFolders>true</ListFolders>
        <ListRestriction>
          <Type>Deny</Type>
          <Extensions />
        </ListRestriction>
        <CreateRestriction>
          <Type>Deny</Type>
          <Extensions />
        </CreateRestriction>
      </Permission>
    </UserPermissions>
    <GroupPermissions>
      <Permission>
        <IdentityName>admins</IdentityName>
        <Create>true</Create>
        <Delete>true</Delete>
        <Rename>true</Rename>
        <Upload>true</Upload>
        <Download>true</Download>
        <ZipDownload>true</ZipDownload>
        <Zip>true</Zip>
        <Unzip>true</Unzip>
        <Cut>true</Cut>
        <Copy>true</Copy>
        <ListFiles>true</ListFiles>
        <ListFolders>true</ListFolders>
        <ListRestriction>
          <Type>Deny</Type>
          <Extensions />
        </ListRestriction>
        <CreateRestriction>
          <Type>Deny</Type>
          <Extensions />
        </CreateRestriction>
      </Permission>
    </GroupPermissions>
  </Folder>
  <Folder>
    <Name>Folder 2</Name>
    <Location>%APPROOT%\DemoFolder\Folder2</Location>
    <UserPermissions>
      <Permission>
        <IdentityName>demo</IdentityName>
        <Create>true</Create>
        <Delete>true</Delete>
        <Rename>true</Rename>
        <Upload>true</Upload>
        <Download>true</Download>
        <ZipDownload>true</ZipDownload>
        <Zip>true</Zip>
        <Unzip>true</Unzip>
        <Cut>true</Cut>
        <Copy>true</Copy>
        <ListFiles>true</ListFiles>
        <ListFolders>true</ListFolders>
        <ListRestriction>
          <Type>Deny</Type>
          <Extensions>
            <string>EXE</string>
            <string>BAT</string>
            <string>ASPX</string>
            <string>PHP</string>
          </Extensions>
        </ListRestriction>
        <CreateRestriction>
          <Type>Deny</Type>
          <Extensions>
            <string>EXE</string>
            <string>BAT</string>
            <string>ASPX</string>
            <string>PHP</string>
          </Extensions>
        </CreateRestriction>
      </Permission>
    </UserPermissions>
    <GroupPermissions>
      <Permission>
        <IdentityName>admins</IdentityName>
        <Create>true</Create>
        <Delete>true</Delete>
        <Rename>true</Rename>
        <Upload>true</Upload>
        <Download>true</Download>
        <ZipDownload>true</ZipDownload>
        <Zip>true</Zip>
        <Unzip>true</Unzip>
        <Cut>true</Cut>
        <Copy>true</Copy>
        <ListFiles>true</ListFiles>
        <ListFolders>true</ListFolders>
        <ListRestriction>
          <Type>Deny</Type>
          <Extensions />
        </ListRestriction>
        <CreateRestriction>
          <Type>Deny</Type>
          <Extensions />
        </CreateRestriction>
      </Permission>
    </GroupPermissions>
  </Folder>
</Folders>
</textarea>
<br/><br/>




<p class="topic">
        <a id="programmatic">Setup users and folders programmatically</a>
</p>


You can setup users, their authentication, permissions and  folders programmatically. I.e you don't need to use Admin panel and built-in XML files for storing data. This is needed if you have own database of users or you want programmatically setup users and folders.
<br/>
All you need is to edit open source files:
<ul>
<li>
<b>Global.asax</b> stores sample code to setup users and folders. You should uncomment code in  Application_Start event to use programmatic setup.</li>
</ul>
 Below is the example of building list users, groups programmatically.
<br/>



 
 
<!-- For windows version only. Start --> 
<textarea  cols="80" rows="15"> 
            // Create some folders
            Folder DemoFolder1 = new Folder("Demo folder 1", @"%APPROOT%\DemoFolder\Folder1"),
                   Folder2 = new Folder("Folder 2", @"%APPROOT%\DemoFolder\Folder2"),
                   HomeDrive = new Folder("Home drive", "%HOME%"),
                   AdminTestFolder = new Folder("Admin test folder", @"%APPROOT%\DemoFolder\%USERNAME%"),
                   DomainUsersDemoFolder = new Folder("Domain users demo folder", @"%APPROOT%\DemoFolder\%GROUPNAME%");

            // Add of the additional information for a DemoFolder1
            DemoFolder1.Description = "";
            DemoFolder1.CustomField = "";
            
            // Create full permissions for some users and groups
        UserPermissions AdministratorUserPermission = new UserPermissions(AccountUtils.GetUserIdentity("Administrator"));
        GroupPermissions AdministratorsPermission = new GroupPermissions(AccountUtils.GetGroupIdentity("Administrators"));
        GroupPermissions DomainUsersPermission = new GroupPermissions(AccountUtils.GetGroupIdentity("Domain Users"));
        GroupPermissions DomainAdminsPermission = new GroupPermissions(AccountUtils.GetGroupIdentity("Domain Admins"));
        GroupPermissions UsersPermissions = new GroupPermissions(AccountUtils.GetGroupIdentity("Users"));
            
            //// Create special permissions for Folder2:
            // for DomainUsers
        GroupPermissions DomainUsersPermissionFolder2 = new GroupPermissions(AccountUtils.GetGroupIdentity("Domain Users"));
            DomainUsersPermissionFolder2.Create = true;
            DomainUsersPermissionFolder2.Delete = true;
            DomainUsersPermissionFolder2.Rename = true;
            DomainUsersPermissionFolder2.Upload = true;
            DomainUsersPermissionFolder2.Download = true;
            DomainUsersPermissionFolder2.ZipDownload = true;
            DomainUsersPermissionFolder2.Zip = true;
            DomainUsersPermissionFolder2.Unzip = true;
            DomainUsersPermissionFolder2.Cut = true;
            DomainUsersPermissionFolder2.Copy = true;
            DomainUsersPermissionFolder2.Modify = true;
            DomainUsersPermissionFolder2.ListFiles = true;
            DomainUsersPermissionFolder2.ListFolders = true;
            FileTypeRestriction Deny_EXE_BAT_ASPX = new FileTypeRestriction(RestrictionType.Deny, new string[] { "EXE", "BAT", "ASPX" });
            DomainUsersPermissionFolder2.ListRestriction = Deny_EXE_BAT_ASPX;
            DomainUsersPermissionFolder2.CreateRestriction = Deny_EXE_BAT_ASPX;
            DomainUsersPermissionFolder2.customField = "";
            // for Users
        GroupPermissions UsersPermissionFolder2 = new GroupPermissions(AccountUtils.GetGroupIdentity("Users"));
            UsersPermissionFolder2.ListRestriction = UsersPermissionFolder2.CreateRestriction = Deny_EXE_BAT_ASPX;

            //// Assign permissions to the folders:
            // DemoFolder1
            DemoFolder1.UserPermissions.Add(AdministratorUserPermission);
            DemoFolder1.GroupPermissions.Add(DomainUsersPermission);
            DemoFolder1.GroupPermissions.Add(DomainAdminsPermission);
            DemoFolder1.GroupPermissions.Add(UsersPermissions);
            DemoFolder1.GroupPermissions.Add(AdministratorsPermission);
            // Folder2
            Folder2.UserPermissions.Add(AdministratorUserPermission);
            Folder2.GroupPermissions.Add(DomainUsersPermissionFolder2);
            Folder2.GroupPermissions.Add(DomainAdminsPermission);
            Folder2.GroupPermissions.Add(UsersPermissionFolder2);
            Folder2.GroupPermissions.Add(AdministratorsPermission);
            // HomeDrive
            HomeDrive.UserPermissions.Add(AdministratorUserPermission);
            HomeDrive.GroupPermissions.Add(DomainUsersPermission);
            // AdminTestFolder
            AdminTestFolder.UserPermissions.Add(AdministratorUserPermission);
            // DomainUsersDemoFolder
            DomainUsersDemoFolder.GroupPermissions.Add(DomainUsersPermission);

            // Add created folders to the list
            List<Folder> folderList = new List<Folder>();
            folderList.Add(DemoFolder1);
            folderList.Add(Folder2);
            folderList.Add(HomeDrive);
            folderList.Add(AdminTestFolder);
            folderList.Add(DomainUsersDemoFolder);

            // Set SimpleAccountManager and SimpleFolderManager as work classes
            Utils.ConcreteSimpleAccountManager = new SimpleAccountManager();
            Utils.ConcreteSimpleFolderManager = new SimpleFolderManager(folderList); 
</textarea> 
<!-- For windows version only. End -->  

</body>
</html>
